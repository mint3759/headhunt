{% extends "headhunt/base.html" %}

{% block content %}
    <h1>의뢰 상세 정보</h1>
        <div>
            <p>의뢰자: {{ req.0 }}</p>
            <p>제목: {{ req.1 }} </p>
            <p>의뢰 금액(원): {{ req.2 }} </p>
            <p>최소 경력(년): {{ req.3 }}</p>
            <p>최소 인원(명): {{ req.4 }}</p>
            <p>최대 인원(명): {{ req.5 }}</p>
            <p>모집 시작 날짜: {{ req.6 }}</p>
            <p>모집 마감 날짜: {{ req.7 }}</p>
            <form class="form-horizontal" id="mainform" method = "POST">
            {% csrf_token %}
            <div class="form-group">
                <label class="control-label col-sm-2">거부 메시지 입력</label>
                <div class="col-sm-10">
                  {{ form.message }}
                </div>
            </div>
            <a href = "{% url 'myrequest_client' %}">
                <button type = "button" id = "{{req.0.0}}" name = "refusing" class="btn btn-default btn-md"  style="margin-top:1px; margin-bottom: 1px;">거부</button>
            </a>
                <a href = "{% url 'myrequest_client' %}">
                <button type = "button" id = "{{req.0.0}}" name = "accepting" class="btn btn-default btn-md"  style="margin-top:1px; margin-bottom: 1px;">수락</button>
            </a>
        </div>
{% endblock %}

{% block javascript_tail %}
<script>
    $(document).on("click", "button[name=refusting]", function(){

            $.ajax({
                type: 'POST',
                url : '../refuse_completeAsk/',
                data : {REQ_ID: $(this).attr('id'),
                        csrfmiddlewaretoken : '{{ csrf_token }}' },
                success : function(result){
                    alert("의뢰 완료 요청을 거절하셨습니다.");
                }
            });
    });
    $(document).on("click", "button[name=accepting]", function(){

            $.ajax({
                type: 'POST',
                url : '../accept_completeAsk/',
                data : {REQ_ID: $(this).attr('id'),
                        csrfmiddlewaretoken : '{{ csrf_token }}' },
                success : function(result){
                    alert("의뢰 완료 요청을 수락하셨습니다.");
                }
            });
    });
</script>
{% endblock %}